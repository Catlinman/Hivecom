(function(e,t){if(typeof define==="function"&&define.amd){define("smoothScroll",t(e))}else if(typeof exports==="object"){module.exports=t(e)}else{e.smoothScroll=t(e)}})(window||this,function(e){"use strict";var t={};var n=!!document.querySelector&&!!e.addEventListener;var r,i,s;var o={speed:500,easing:"easeInOutCubic",offset:0,updateURL:true,callbackBefore:function(){},callbackAfter:function(){}};var u=function(e,t,n){if(Object.prototype.toString.call(e)==="[object Object]"){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){t.call(n,e[r],r,e)}}}else{for(var i=0,s=e.length;i<s;i++){t.call(n,e[i],i,e)}}};var a=function(e,t){var n={};u(e,function(t,r){n[r]=e[r]});u(t,function(e,r){n[r]=t[r]});return n};var f=function(e,t){var n=t.charAt(0);for(;e&&e!==document;e=e.parentNode){if(n==="."){if(e.classList.contains(t.substr(1))){return e}}else if(n==="#"){if(e.id===t.substr(1)){return e}}else if(n==="["){if(e.hasAttribute(t.substr(1,t.length-2))){return e}}}return false};var l=function(e){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)};var c=function(e){var t=String(e);var n=t.length;var r=-1;var i;var s="";var o=t.charCodeAt(0);while(++r<n){i=t.charCodeAt(r);if(i===0){throw new InvalidCharacterError("Invalid character: the input contains U+0000.")}if(i>=1&&i<=31||i==127||r===0&&i>=48&&i<=57||r===1&&i>=48&&i<=57&&o===45){s+="\\"+i.toString(16)+" ";continue}if(i>=128||i===45||i===95||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122){s+=t.charAt(r);continue}s+="\\"+t.charAt(r)}return s};var h=function(e,t){var n;if(e==="easeInQuad")n=t*t;if(e==="easeOutQuad")n=t*(2-t);if(e==="easeInOutQuad")n=t<.5?2*t*t:-1+(4-2*t)*t;if(e==="easeInCubic")n=t*t*t;if(e==="easeOutCubic")n=--t*t*t+1;if(e==="easeInOutCubic")n=t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;if(e==="easeInQuart")n=t*t*t*t;if(e==="easeOutQuart")n=1- --t*t*t*t;if(e==="easeInOutQuart")n=t<.5?8*t*t*t*t:1-8*--t*t*t*t;if(e==="easeInQuint")n=t*t*t*t*t;if(e==="easeOutQuint")n=1+ --t*t*t*t*t;if(e==="easeInOutQuint")n=t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;return n||t};var p=function(e,t,n){var r=0;if(e.offsetParent){do{r+=e.offsetTop;e=e.offsetParent}while(e)}r=r-t-n;return r>=0?r:0};var d=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)};var v=function(e){return!e||!(typeof JSON==="object"&&typeof JSON.parse==="function")?{}:JSON.parse(e)};var m=function(t,n){if(history.pushState&&(n||n==="true")){history.pushState(null,null,[e.location.protocol,"//",e.location.host,e.location.pathname,e.location.search,t].join(""))}};t.animateScroll=function(t,n,r){var i=a(i||o,r||{});var u=v(t?t.getAttribute("data-options"):null);i=a(i,u);n="#"+c(n.substr(1));var f=n==="#"?document.documentElement:document.querySelector(n);var g=e.pageYOffset;if(!s){s=document.querySelector("[data-scroll-header]")}var y=s===null?0:l(s)+s.offsetTop;var b=p(f,y,parseInt(i.offset,10));var w;var E=b-g;var S=d();var x=0;var T,N;m(n,i.updateURL);var C=function(r,s,o){var u=e.pageYOffset;if(r==s||u==s||e.innerHeight+u>=S){clearInterval(o);f.focus();i.callbackAfter(t,n)}};var k=function(){x+=16;T=x/parseInt(i.speed,10);T=T>1?1:T;N=g+E*h(i.easing,T);e.scrollTo(0,Math.floor(N));C(N,b,w)};var L=function(){i.callbackBefore(t,n);w=setInterval(k,16)};if(e.pageYOffset===0){e.scrollTo(0,0)}L()};var g=function(e){var n=f(e.target,"[data-scroll]");if(n&&n.tagName.toLowerCase()==="a"){e.preventDefault();t.animateScroll(n,n.hash,r)}};var y=function(e){if(!i){i=setTimeout(function(){i=null;headerHeight=s===null?0:l(s)+s.offsetTop},66)}};t.destroy=function(){if(!r)return;document.removeEventListener("click",g,false);e.removeEventListener("resize",y,false);r=null;i=null;s=null};t.init=function(i){if(!n)return;t.destroy();r=a(o,i||{});s=document.querySelector("[data-scroll-header]");document.addEventListener("click",g,false);if(s){e.addEventListener("resize",y,false)}};return t})